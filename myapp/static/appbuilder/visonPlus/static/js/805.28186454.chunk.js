"use strict";(self.webpackChunkvite_ml_platform=self.webpackChunkvite_ml_platform||[]).push([[805],{5117:function(e,n,o){o.d(n,{T:function(){return i},C:function(){return l}});var t=o(6030),i=function(){return(0,t.I0)()},l=t.v9},6805:function(e,n,o){o.r(n),o.d(n,{default:function(){return an}});var t=o(2791),i=o(9332),l=o(9439),r=o(9093),a=o(8511),s=o(199),d=o(7291),c=o(927),u=o(1318),p=o(5853),f=o(5117),x=o(6097);function m(e,n){var o=null;return function(){for(var t=this,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];clearTimeout(o),o=window.setTimeout((function(){return e.apply(t,l)}),n)}}var h=o(2898),g={modalStyles:(0,h.y0)({position:"fixed",width:"100%",height:"100vh",backgroundColor:"rgba(0, 0, 0, .5)",zIndex:999,display:"flex",justifyContent:"center",alignItems:"center"}),cancelIcon:{iconName:"Cancel"},contentStyles:(0,h.ZC)({container:{minWidth:"75%",minHeight:"80%",overflow:"hidden",display:"flex",borderRadius:2,backgroundColor:"#fff",padding:"0 24px"},header:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 0 14px 0"},body:{flex:1,height:0,position:"relative",display:"flex"},footer:{position:"relative",display:"flex",padding:"24px 0",justifyContent:"flex-end"}}),resizeLine:(0,h.y0)({width:8,height:"100%",cursor:"col-resize",background:"#eee",transition:"background 0.2s",margin:"0 15px 0 2px",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"}),resizeLineIconStyles:(0,h.y0)({display:"flex",justifyContent:"center",alignItems:"center",boxSizing:"border-box",paddingRight:"19px",width:8,height:20,fontSize:20,pointerEvents:"none"})},v=o(184),b=function(e){var n=(0,f.T)(),o=(0,f.C)(x.ld),m=(0,f.C)(x.PF),h=(0,f.C)(x.lr),b=(0,t.useState)(""),y=(0,l.Z)(b,2),j=y[0],w=y[1],S=(0,t.useState)("100%"),C=(0,l.Z)(S,2),k=C[0],N=C[1],_=(0,t.useState)(!1),L=(0,l.Z)(_,2),Z=L[0],I=L[1],D=(0,t.useState)(!1),T=(0,l.Z)(D,2),O=T[0],z=T[1],B=function(){z(!1),n((0,x.y7)(!1))},H=function(){I(!1)};return(0,t.useEffect)((function(){w(m)}),[o]),(0,v.jsx)("div",{className:g.modalStyles,style:{display:o?"flex":"none"},children:(0,v.jsxs)(i.K,{className:g.contentStyles.container,children:[(0,v.jsxs)("div",{className:g.contentStyles.header,children:[(0,v.jsx)("span",{children:"\u7f16\u8f91"}),(0,v.jsx)(r.h,{iconProps:g.cancelIcon,onClick:B})]}),(0,v.jsxs)("div",{className:g.contentStyles.body,onMouseMove:function(e){Z&&e.clientX>370&&N(e.clientX-270)},onMouseUp:H,onMouseLeave:H,children:[(0,v.jsx)("div",{style:{height:"100%",width:k},children:(0,v.jsx)(p.ZP,{language:h||"json",theme:"vs",value:j,onChange:function(e){z(!1),w(e)},height:500,options:{renderValidationDecorations:"on",automaticLayout:!0,autoClosingOvertype:"always",cursorStyle:"block",quickSuggestions:!1,scrollBeyondLastLine:!1,snippetSuggestions:"none",minimap:{enabled:!1}}})}),(0,v.jsx)("div",{className:g.resizeLine,onMouseDown:function(){I(!0)},children:(0,v.jsx)(a.J,{iconName:"BulletedListBulletMirrored",className:g.resizeLineIconStyles})}),(0,v.jsx)("div",{style:{flex:1}})]}),(0,v.jsxs)("div",{className:g.contentStyles.footer,children:[O?(0,v.jsx)(s.c,{messageBarType:d.f.error,styles:{root:{position:"absolute",width:"50%",left:0}},isMultiline:!1,children:"\u683c\u5f0f\u9519\u8bef"}):null,(0,v.jsx)(c.K,{styles:{root:{marginRight:10}},onClick:function(){!e.isStrictJson||function(e){try{return JSON.parse(e),!0}catch(n){return!1}}(j)?(n((0,x.sW)(j)),n((0,x.y7)(!1))):z(!0)},children:"\u786e\u8ba4"}),(0,v.jsx)(u.a,{onClick:B,children:"\u53d6\u6d88"})]})]})})},y=o(8636),j=o(3433),w=o(1413),S=o(4942),C=o(2692),k=o(7708),N=o(110),_=o(7504),L=o(3997),Z=o(4011),I=o(2081),D=o(5223),T=o(7217),O=o(3860),z=o(2274),B=o(4794),H=o(3934),E=(0,h.y0)({display:"flex",flexDirection:"column",width:350,position:"absolute",top:0,right:0,bottom:0,height:"auto",backgroundColor:"#fff",borderLeft:"1px solid rgb(234, 234, 234)",boxShadow:"rgb(0 0 0 / 18%) 0px 1.6px 3.6px 0px, rgb(0 0 0 / 22%) 0px 0.3px 0.9px 0px",zIndex:999}),R=(0,h.y0)({display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",color:"balck",boxSizing:"border-box",padding:"10px 20px"}),M=(0,h.y0)({fontSize:20,fontWeight:600,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:"black"}),W=(0,h.y0)({flex:"1 1 0%",overflowY:"auto","&::-webkit-scrollbar":{width:4},"&::-webkit-scrollbar-thumb":{minHeight:"15px",border:"6px solid transparent",backgroundClip:"padding-box",backgroundColor:"rgb(200, 200, 200)"}}),K=(0,h.y0)({padding:"0 20px 20px",overflowX:"hidden",wordBreak:"break-word",userSelect:"text",borderTop:"1px solid #eaeaea"}),F=(0,h.y0)({margin:"10px -20px 0 -20px",borderTop:"1px solid #eaeaea"}),J=(0,h.y0)({color:"rgb(96, 94, 92)",fontSize:10,"> a":{textDecoration:"none"}}),P={textLabelStyle:(0,h.y0)({display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:600,color:"rgb(50, 49, 48)",boxSizing:"border-box",boxShadow:"none",margin:"0px",padding:"5px 0px",overflowWrap:"break-word",lineHeight:"30px"}),argsDescription:J,settingContainer:E,settingHeader:R,headerTitle:M,settingContent:W,contentWrapper:K,splitLine:F},A=function(){var e=(0,f.T)(),n=(0,f.C)(y.H6),o=(0,f.C)(D.RU),i=(0,f.C)(y.mg),a=(0,f.C)(I.hr),s=(0,t.useState)({}),d=(0,l.Z)(s,2),c=d[0],u=d[1],p=(0,t.useState)([]),m=(0,l.Z)(p,2),h=(m[0],m[1],(0,t.useState)()),g=(0,l.Z)(h,2),b=(g[0],g[1]),j=(0,t.useState)({}),S=(0,l.Z)(j,2),C=S[0],k=S[1],N=(0,t.useState)({}),L=(0,l.Z)(N,2),Z=L[0],T=L[1],E=function(o,t,l){var r={},a=null;switch(l){case"json":try{a=JSON.parse("".concat(t))}catch(p){a=t}break;case"int":a=+t;break;default:a=t}if(l){var s=JSON.parse(JSON.stringify(C));s[o]=a,r.args=JSON.stringify(s)}else r[o]=t;if("label"===o){var d=t;b(d),r[o]=d.key}null!==r&&void 0!==r&&r.args&&k((0,w.Z)((0,w.Z)({},C),JSON.parse(r.args))),n&&(u((0,w.Z)((0,w.Z)({},c),r)),e((0,y.v_)((0,w.Z)((0,w.Z)({},i),r))))};return(0,t.useEffect)((function(){if(console.log("current pipeline msg",n),n){var e,o;u(n);var t={key:null===n||void 0===n||null===(e=n.project)||void 0===e?void 0:e.id,text:null===n||void 0===n||null===(o=n.project)||void 0===o?void 0:o.name};b(t);var i=n.pipeline_ui_config,l=n.config,r=i,a=Object.keys(r||{}).reduce((function(e,n){var o=r[n];return Object.keys(o).forEach((function(n){l[n]?e[n]=l[n]:e[n]=o[n].default})),e}),{});k(a),T(r)}}),[n]),(0,t.useEffect)((function(){Object.keys(i).length>1&&e((0,y.u6)(!0))}),[i]),(0,t.useEffect)((function(){var n={};a.forEach((function(e){if((0,_.un)(e)){var o,t=a.filter((function(n){return n.id===e.source}))[0],i=a.filter((function(n){return n.id===e.target}))[0];null!==(o=n["".concat(i.data.name)])&&void 0!==o&&o.upstream?n["".concat(i.data.name)].upstream.push("".concat(t.data.name)):(n["".concat(i.data.name)]={},n["".concat(i.data.name)].upstream=["".concat(t.data.name)])}}));var o=(0,w.Z)({},n);u((0,w.Z)((0,w.Z)({},c),{dag_json:JSON.stringify(o,void 0,4)})),e((0,y.v_)((0,w.Z)((0,w.Z)({},i),{dag_json:JSON.stringify(o)})))}),[a]),(0,v.jsxs)("div",{style:{visibility:o?"visible":"hidden"},className:P.settingContainer,children:[(0,v.jsxs)("div",{className:P.settingHeader,children:[(0,v.jsx)("div",{className:P.headerTitle,children:"\u9879\u76ee\u8bbe\u7f6e"}),(0,v.jsx)(r.h,{iconProps:{iconName:"ChromeClose",styles:{root:{fontSize:12,color:"#000"}}},onClick:function(){e((0,D.ZN)())}})]}),(0,v.jsx)("div",{className:P.settingContent,children:(0,v.jsxs)("div",{className:P.contentWrapper,children:[(0,v.jsx)(O.n,{label:"\u540d\u79f0",description:"\u82f1\u6587\u540d(\u5b57\u6bcd\u3001\u6570\u5b57\u3001- \u7ec4\u6210)\uff0c\u6700\u957f50\u4e2a\u5b57\u7b26",onChange:function(e,n){E("label",n||"")},value:(null===c||void 0===c?void 0:c.label)||"",disabled:!0}),(0,v.jsx)("div",{className:P.splitLine}),Object.keys(Z||{}).reduce((function(n,o){var i=Z[o],l=Object.keys(i).map((function(n){var o=i[n],l=o.choice.map((function(e){return{key:e,text:e}})),r=C&&C[n],a="json"===o.type?JSON.stringify(r,void 0,4):r;return l.length>0?(0,v.jsx)(t.Fragment,{children:(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(z.L,{label:"".concat(n),onChange:function(e,t){E(n,"".concat(null===t||void 0===t?void 0:t.text)||"",o.type)},defaultSelectedKey:a||o.default,options:l,required:1===o.require,disabled:1!==o.editable}),(0,v.jsx)("div",{className:P.argsDescription,dangerouslySetInnerHTML:{__html:o.describe}})]})},n):(0,v.jsx)(t.Fragment,{children:(0,v.jsx)(O.n,{onRenderLabel:function(){return(0,v.jsxs)("div",{className:P.textLabelStyle,children:["".concat(n),"json"===o.type?(0,v.jsx)(B.K,{iconProps:{iconName:"FullWidthEdit"},onClick:function(){e((0,x.vh)({key:n,value:a})),e((0,x.y7)(!0))},children:"\u7f16\u8f91"}):null]})},onRenderDescription:function(){return(0,v.jsx)("div",{className:P.argsDescription,dangerouslySetInnerHTML:{__html:o.describe}})},multiline:"json"===o.type||"text"===o.type,autoAdjustHeight:"json"===o.type||"text"===o.type,onChange:function(e,t){E(n,t||"",o.type)},value:a,required:1===o.require,disabled:1!==o.editable||"json"===o.type})},n)}));return n.push((0,v.jsxs)(t.Fragment,{children:[(0,v.jsxs)(H._,{children:["\u53c2\u6570 ",o]}),l.flat(),(0,v.jsx)("div",{className:P.splitLine})]},o)),n}),[])]})})]})},G=o(656),X=(0,h.y0)({display:"flex",flexDirection:"column",width:350,position:"absolute",top:0,right:0,bottom:0,height:"auto",backgroundColor:"#fff",borderLeft:"1px solid rgb(234, 234, 234)",boxShadow:"rgb(0 0 0 / 18%) 0px 1.6px 3.6px 0px, rgb(0 0 0 / 22%) 0px 0.3px 0.9px 0px",zIndex:998}),V=(0,h.y0)({display:"flex",width:"100%",alignItems:"center",justifyContent:"space-between",color:"balck",boxSizing:"border-box",padding:"10px 20px"}),q=(0,h.y0)({fontSize:20,textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",color:"black",fontWeight:600}),U=(0,h.y0)({flex:"1 1 0%",overflowY:"auto","&::-webkit-scrollbar":{width:4},"&::-webkit-scrollbar-thumb":{minHeight:"15px",border:"6px solid transparent",backgroundClip:"padding-box",backgroundColor:"rgb(200, 200, 200)"}}),$=(0,h.y0)({padding:"0 20px 20px",overflowX:"hidden",wordBreak:"break-word",userSelect:"text",borderTop:"1px solid #eaeaea"}),Y=(0,h.y0)({margin:"10px -20px 0 -20px",borderTop:"1px solid #eaeaea"}),Q=(0,h.y0)({height:"auto",display:"flex",flexDirection:"column",paddingTop:20}),ee=(0,h.y0)({alignSelf:"center"}),ne=(0,h.y0)({display:"flex",flexDirection:"row",justifyContent:"space-evenly",paddingTop:20}),oe=(0,h.y0)({color:"rgb(96, 94, 92)",fontSize:10,paddingTop:5,paddingLeft:2,"> a":{textDecoration:"none"}}),te=(0,h.y0)({color:"rgb(96, 94, 92)",fontSize:10,"> a":{textDecoration:"none"}}),ie=(0,h.y0)({display:"flex",alignItems:"center",justifyContent:"space-between",fontWeight:600,color:"rgb(50, 49, 48)",boxSizing:"border-box",boxShadow:"none",margin:"0px",padding:"5px 0px",overflowWrap:"break-word",lineHeight:"30px"}),le={borTitle:(0,h.y0)({fontSize:16,borderLeft:"2px solid rgb(0, 120, 212)",paddingLeft:4,marginTop:8}),modelContainer:X,modelHeader:V,headerTitle:q,modelContent:U,contentWrapper:$,splitLine:Y,settingControl:Q,saveButton:ee,debugButton:ne,templateConfig:oe,argsDescription:te,textLabelStyle:ie},re=function(e){var n=(0,f.T)(),o=(0,f.C)(I.hr),i=(0,f.C)(T.Aj),r=(0,f.C)(x.ld),a=(0,f.C)(x.OA),s=(0,f.C)(x.PF),d=(0,t.useState)({}),c=(0,l.Z)(d,2),u=c[0],p=c[1],m=(0,t.useState)({}),h=(0,l.Z)(m,2),g=h[0],b=h[1],y=(0,t.useState)({}),j=(0,l.Z)(y,2),S=(j[0],j[1],(0,t.useState)({})),C=(0,l.Z)(S,2),k=C[0],N=C[1],_=(0,t.useState)({}),L=(0,l.Z)(_,2),Z=L[0],D=L[1],E=function(e,n,o){var t={},i=null;switch(o){case"json":try{i=JSON.parse("".concat(n))}catch(s){i=n}break;case"int":i=+n;break;default:i=n}if(o){var l=JSON.parse(JSON.stringify(Z));l[e]=i,t=l}else t[e]=n;var r=(0,w.Z)((0,w.Z)({},g),t),a=(0,w.Z)((0,w.Z)({},u),t);console.log("objChanged",r),console.log("taskChanged",g),console.log("obj",t),console.log("task",u),b(r),p(a),D((0,w.Z)((0,w.Z)({},Z),t))};return(0,t.useEffect)((function(){if(console.log("modelProps",e),e.model.selected&&(n((0,T.kQ)(e.model.id)),0===Object.keys(u).length)){var o,t=e.model.data.config,i=(null===(o=e.model.data)||void 0===o?void 0:o.info["task-config"])||{},l=Object.keys(t).reduce((function(e,n){var o=t[n];return Object.keys(o).forEach((function(n){i[n]?e[n]=i[n]:e[n]=o[n].default})),e}),{});p(e.model.data),b(l),D(l),N(t),console.log("---",t,l)}}),[e.model.selected]),(0,t.useEffect)((function(){if(e.model.id&&(console.log("handleRdxArgs",g),n((0,T.hs)({id:e.model.id,changed:g}))),null!==g&&void 0!==g&&g.label){var t=o.map((function(n){if(n.id===e.model.id){var o=(0,w.Z)((0,w.Z)({},n.data),{label:g.label});return(0,w.Z)((0,w.Z)({},n),{data:o})}return n}));console.log("handleRdxArgs",t),n((0,I.OV)(t))}}),[g]),(0,t.useEffect)((function(){Object.keys(k).length>0&&e.model.id===i&&!r&&E(a,s,"json")}),[s]),(0,v.jsxs)("div",{className:le.modelContainer,style:{visibility:e.model.selected?"visible":"hidden"},children:[(0,v.jsx)("div",{className:le.modelHeader,children:(0,v.jsx)("div",{className:le.headerTitle,children:(null===u||void 0===u?void 0:u.name)||""})}),(0,v.jsx)("div",{className:le.modelContent,children:(0,v.jsxs)("div",{className:le.contentWrapper,children:[(0,v.jsx)(O.n,{label:"\u522b\u540d",description:"\u8282\u70b9\u522b\u540d",required:!0,onChange:function(e,n){E("label",n||"")},value:(null===u||void 0===u?void 0:u.label)||""}),(0,v.jsx)("div",{className:le.splitLine}),Object.keys(k).reduce((function(e,o){var i=k[o],l=Object.keys(i).map((function(e){var o=i[e],l=o.choice.map((function(e){return{key:e,text:e}})),r=Z&&Z[e],a="json"===o.type?JSON.stringify(r,void 0,4):r;return(0,v.jsx)(t.Fragment,{children:l.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(z.L,{label:"".concat(o.label),onChange:function(n,t){E(e,"".concat(null===t||void 0===t?void 0:t.text)||"",o.type)},defaultSelectedKey:a||o.default,options:l,required:1===o.require,disabled:1!==o.editable}),(0,v.jsx)("div",{className:le.argsDescription,dangerouslySetInnerHTML:{__html:o.describe}})]}):(0,v.jsx)(O.n,{onRenderLabel:function(){return(0,v.jsxs)("div",{className:le.textLabelStyle,children:["".concat(o.label),"str"!==o.type?(0,v.jsx)(B.K,{iconProps:{iconName:"FullWidthEdit"},onClick:function(){n((0,x.vh)({key:e,value:a,type:o.item_type})),n((0,x.y7)(!0))},children:"\u7f16\u8f91"}):null]})},onRenderDescription:function(){return(0,v.jsx)("div",{className:le.argsDescription,dangerouslySetInnerHTML:{__html:o.describe}})},multiline:"str"!==o.type,autoAdjustHeight:"str"!==o.type,onChange:function(n,t){E(e,t||"",o.type)},value:a,required:1===o.require,disabled:1!==o.editable})},e)}));return e.push((0,v.jsxs)(t.Fragment,{children:[(0,v.jsx)(H._,{children:(0,v.jsx)("div",{className:le.borTitle,children:o})}),l.flat(),(0,v.jsx)("div",{className:le.splitLine})]},o)),e}),[])]})})]})},ae={height:54,width:272,borderRadius:100,borderStyle:"solid",display:"flex",flexDirection:"row",backgroundColor:"#fff",fontSize:12,cursor:"move",boxSizing:"border-box",transition:"all 0.3s"},se=(0,h.y0)((0,w.Z)((0,w.Z)({},ae),{borderWidth:1,borderColor:"#b1b1b7"})),de=(0,h.y0)((0,w.Z)((0,w.Z)({},ae),{borderWidth:1,borderColor:"#006dce",backgroundColor:"#f1f7fd"})),ce=(0,h.y0)({width:8,flexShrink:0,borderRadius:"3px 0 0 3px",borderRight:"1px solid #8a8886",margin:"-8px 0 -8px -8px"}),ue=(0,h.y0)({boxSizing:"border-box",display:"flex",flexDirection:"column",overflow:"hidden"}),pe=(0,h.y0)({display:"flex",marginLeft:7,minHeight:26}),fe=(0,h.y0)({fontSize:16,width:64,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(0, 120, 212)",borderTopLeftRadius:100,borderBottomLeftRadius:100,margin:"-1px 0 -1px -1px"}),xe=(0,h.y0)({userSelect:"none",boxSizing:"border-box",color:"#fff",fontSize:20,marginLeft:8}),me=(0,h.y0)({whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",paddingLeft:8,paddingBottom:2,marginBottom:2,fontWeight:600,fontSize:14,borderBottom:"1px dashed #c1c1c1",userSelect:"none"}),he=(0,h.y0)({width:"12px !important",height:"12px !important",bottom:"-7px !important",borderColor:"#b1b1b7 !important",backgroundColor:"#fff !important",transition:"all 0.3s","&:hover":{borderWidth:"2px !important",borderColor:"var(--hover-color) !important",cursor:"pointer !important"}}),ge=(0,h.y0)({visibility:"hidden"}),ve=(0,h.y0)({height:"100%",width:"100%",display:"flex",justifyContent:"center",flexDirection:"column"}),be={nodeTips:(0,h.y0)({color:"rgb(177, 177, 183)",paddingLeft:8}),nodeContentWrapper:ve,nodeContainer:se,nodeOnSelect:de,nodeBar:ce,nodeContent:ue,nodeConentTitleBar:pe,nodeIconWrapper:fe,nodeIcon:xe,nodeTitle:me,handleStyle:he,hidden:ge},ye={dataSet:function(e){var n,o,t,i,l,r,s,d,c,u,p,f,x,m,h,g,b,y;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(_.HH,{type:"target",position:_.Ly.Top,style:{top:"-7px","--hover-color":null===e||void 0===e||null===(n=e.data)||void 0===n||null===(o=n.info)||void 0===o||null===(t=o.color)||void 0===t?void 0:t.color},className:be.handleStyle}),(0,v.jsxs)("div",{className:e.selected?be.nodeOnSelect:be.nodeContainer,style:{borderColor:e.selected?null===e||void 0===e||null===(i=e.data)||void 0===i||null===(l=i.info)||void 0===l||null===(r=l.color)||void 0===r?void 0:r.color:"",backgroundColor:e.selected?null===e||void 0===e||null===(s=e.data)||void 0===s||null===(d=s.info)||void 0===d||null===(c=d.color)||void 0===c?void 0:c.bg:""},children:[(0,v.jsx)("div",{className:be.nodeIconWrapper,style:{backgroundColor:null===e||void 0===e||null===(u=e.data)||void 0===u||null===(p=u.info)||void 0===p||null===(f=p.color)||void 0===f?void 0:f.color},children:(0,v.jsx)(a.J,{iconName:"Database",className:be.nodeIcon})}),(0,v.jsxs)("div",{className:be.nodeContentWrapper,children:[(0,v.jsx)("div",{className:be.nodeTitle,children:null===e||void 0===e||null===(x=e.data)||void 0===x?void 0:x.label}),(0,v.jsxs)("div",{className:be.nodeTips,children:[null===e||void 0===e||null===(m=e.data)||void 0===m?void 0:m.info["template-group"]," - ",null===e||void 0===e||null===(h=e.data)||void 0===h?void 0:h.info.template]})]})]}),(0,v.jsx)(_.HH,{type:"source",position:_.Ly.Bottom,className:be.handleStyle,style:{"--hover-color":null===e||void 0===e||null===(g=e.data)||void 0===g||null===(b=g.info)||void 0===b||null===(y=b.color)||void 0===y?void 0:y.color}}),(0,v.jsx)(G.m,{hostId:"hostId_model",className:"data-set-layer",children:(0,v.jsx)(re,{model:e})})]})}},je={itemStyles:(0,h.y0)({position:"relative"}),flowWrapper:(0,h.y0)({width:"100%",height:"100%"}),spinnerWrapper:(0,h.y0)({position:"absolute",top:0,left:0,display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",overflow:"hidden",backgroundColor:"rgba(255, 255, 255, 0.6)",zIndex:9999})},we=i.K.Item,Se=function(){var e=(0,f.T)(),n=(0,f.C)(I.hr),o=(0,f.C)(y.Bn),i=(0,f.C)(y.H6),r=(0,f.C)(D.RU),a=(0,f.C)(T.NH),s=(0,t.useRef)(null),d=(0,t.useState)(null),c=(0,l.Z)(d,2),u=c[0],p=c[1];return(0,t.useEffect)((function(){Object.keys(i).length&&L.Z.getTemplateCommandConfig().then((function(n){if(console.log("job_template_modelview",n),0===(null===n||void 0===n?void 0:n.status)&&"success"===(null===n||void 0===n?void 0:n.message)){var o={};for(var t in n.templte_list)if(Object.prototype.hasOwnProperty.call(n.templte_list,t))for(var r=n.templte_list[t],a=0;a<r.length;a++){var s=r[a];o[s.template_name]=s.templte_ui_config}var d=[];Object.keys(i.dag_json).forEach((function(e){var t=i.dag_json[e],r=(0,l.Z)(t.location,2),a=r[0],s=r[1],c=t.upstream,u=void 0===c?[]:c,p=t.templte_ui_config,f=void 0===p?{}:p,x=t.label,m=(0,w.Z)({},n.templte_common_ui_config);if(m)for(var h in m)if(Object.prototype.hasOwnProperty.call(m,h)){var g=(0,w.Z)({},m[h]);for(var v in g){if(Object.prototype.hasOwnProperty.call(g,v))if((0,w.Z)({},g[v]).addable)try{m[h][v].editable=0}catch(S){console.log(S)}}}var b={data:{config:(0,w.Z)((0,w.Z)({},n.templte_common_ui_config),o[t.template]||f),info:(0,w.Z)({},t),label:x,name:e},id:e,position:{x:a,y:s},type:"dataSet"},y=u.map((function(n){return{arrowHeadType:"arrow",id:"reactflow__edge-".concat(n,"-").concat(e),source:n,sourceHandle:null,target:e,targetHandle:null}}));d.push.apply(d,[b].concat((0,j.Z)(y)))})),e((0,I.OV)(d))}})).catch((function(n){var o,t;n.response&&e((0,Z.L$)({msg:null===(o=n.response)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.message}))})).finally((function(){console.log("fin")}))}),[i]),(0,v.jsx)(we,{shrink:!0,grow:1,className:je.itemStyles,children:(0,v.jsxs)("div",{className:je.flowWrapper,ref:s,children:[(0,v.jsxs)(_.ZP,{elements:n,nodeTypes:ye,snapToGrid:!0,snapGrid:[16,16],defaultZoom:1,onLoad:function(e){p(e)},onDrop:function(t){t.preventDefault();var i=s.current.getBoundingClientRect(),l=JSON.parse(t.dataTransfer.getData("application/reactflow"));console.log("modelInfo",l);var r=u.project({x:t.clientX-i.left,y:t.clientY-i.top}),a=l.args;if(Object.keys(a).reduce((function(e,n){var o={};return Object.keys(a[n]).reduce((function(e,o){var t=a[n][o].default;return Object.assign(e,(0,S.Z)({},o,t)),e}),o),Object.assign(e,o),e}),{}),o){"".concat(l.name.replace(/\.|[\u4e00-\u9fa5]/g,"").replace(/_|\s/g,"-")||"task","-").concat(Date.now()).substring(0,49);var d={id:"".concat(l.name,"-").concat((new Date).valueOf()),type:"dataSet",position:r,data:{name:"".concat(l.name,"-").concat((new Date).valueOf()),label:"\u65b0\u5efa ".concat(l.name," \u4efb\u52a1"),args:{},info:l,config:(0,w.Z)((0,w.Z)({},l.templte_common_ui_config),l.templte_ui_config)}};console.log("newNode",d);var c=n.concat(d);e((0,I.OV)(c)),e((0,y.oL)())}},onDragOver:function(e){e.preventDefault(),e.dataTransfer.dropEffect="move"},onElementClick:function(n,o){r&&o.data&&e((0,D.ZN)())},onElementsRemove:function(o){o.forEach((function(n){null!==n&&void 0!==n&&n.id&&(0,_.UG)(n)&&L.Z.task_modelview_del(+n.id).then((function(){setTimeout((function(){e((0,y.oL)())}),2e3)})).catch((function(n){n.response&&e((0,Z.L$)({msg:n.response.data.message}))}))})),e((0,y.u6)(!0)),e((0,I.OV)((0,_.d0)(o,n)))},onConnect:function(o){e((0,y.u6)(!0)),e((0,I.OV)((0,_.Z_)(Object.assign(o,{arrowHeadType:"arrow"}),n)))},onNodeDragStop:function(o,t){e((0,I.OV)(n.map((function(e){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)?t:e})))),e((0,y.u6)(!0))},onSelectionChange:function(n){console.log("current elements",n),n&&e((0,I.pM)(n))},children:[(0,v.jsx)(A,{}),(0,v.jsx)(_.a9,{nodeStrokeColor:"#8a8886",nodeColor:"#c8c8c8"}),(0,v.jsx)(_.ZX,{}),(0,v.jsx)(C.Z,{id:"hostId_model",className:"layer-host"})]}),(0,v.jsx)("div",{className:je.spinnerWrapper,style:{visibility:a?"visible":"hidden"},children:(0,v.jsx)(k.$,{size:N.E.large,label:"Loading"})})]})})},Ce=o(5861),ke=o(7757),Ne=o.n(ke),_e=o(9161),Le=function(){var e=(0,f.T)(),n=(0,f.C)(Z.V0);return(0,t.useEffect)((function(){n&&setTimeout((function(){e((0,Z.L$)(null))}),3e3)}),[n]),n&&(0,v.jsx)(s.c,{messageBarType:d.f.error,styles:{root:{minHeight:32,width:"80%",margin:"0 auto"}},dismissButtonAriaLabel:"Close",onDismiss:function(){e((0,Z.L$)(null))},isMultiline:!1,children:(null===n||void 0===n?void 0:n.msg)||""})},Ze=(0,h.y0)({boxSizing:"border-box",marginLeft:"8px",padding:"0 8px",height:"32px",lineHeight:"32px",cursor:"text",marginBottom:"4px",fontSize:"16px",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"black"}),Ie=(0,h.y0)({visibility:"hidden"}),De=(0,h.y0)({marginRight:"8px","> svg":{width:"14px",height:"14px"}}),Te={iconContainerStyle:(0,h.y0)({display:"flex",alignItems:"center",justifyContent:"center"}),iconStyle:De,headStyle:{root:{backgroundColor:"#fff",padding:"10px 16px",borderBottom:"1px solid #dadada"}},headNameStyle:Ze,buttonItemStyle:{root:{marginLeft:"16px !important"}},hidden:Ie},Oe=i.K.Item,ze=function(){var e=(0,f.T)(),n=(0,f.C)(y.Bn),o=(0,f.C)(y.H6),l=(0,f.C)(Z.zr);(0,t.useEffect)((function(){console.log("info",o)}),[o]);return(0,v.jsx)(Oe,{className:"editor-head",children:(0,v.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",verticalAlign:"center",styles:Te.headStyle,children:[(0,v.jsx)(Oe,{grow:1,children:(0,v.jsxs)(i.K,{horizontal:!0,children:[(0,v.jsx)(Oe,{children:o.name?(0,v.jsx)("div",{className:Te.headNameStyle,children:o.label}):(0,v.jsx)(c.K,{styles:{root:{padding:"17px 16px"}},iconProps:{iconName:"Add",styles:{root:{fontSize:10}}},onClick:function(){L.Z.pipeline_modelview_add({describe:"\u65b0\u5efa\u9879\u76ee-".concat(Date.now()),name:"".concat(l,"-pipeline-").concat(Date.now()),node_selector:"cpu=true,train=true",schedule_type:"once",image_pull_policy:"Always",parallelism:1,project:7}).then((function(e){var n;0===(null===e||void 0===e?void 0:e.status)&&"success"===(null===e||void 0===e?void 0:e.message)&&(window.location.search="?pipeline_id=".concat(null===e||void 0===e||null===(n=e.result)||void 0===n?void 0:n.id))})).catch((function(n){n.response&&e((0,Z.L$)({msg:n.response.data.message}))}))},children:"\u65b0\u5efa\u9879\u76ee"})}),(0,v.jsx)(Oe,{className:o.name?"":Te.hidden,children:(0,v.jsx)(_e.G,{content:"\u8bbe\u7f6e",children:(0,v.jsx)(r.h,{iconProps:{iconName:"Settings"},onClick:function(){e((0,D.ZN)())}})})}),(0,v.jsx)(Oe,{grow:1,align:"center",children:(0,v.jsx)(Le,{})})]})}),(0,v.jsx)(Oe,{className:o.name?"":Te.hidden,children:(0,v.jsxs)(i.K,{horizontal:!0,children:[((null===o||void 0===o?void 0:o.pipeline_run_button)||[]).map((function(o){return(0,v.jsx)(Oe,{styles:Te.buttonItemStyle,children:(0,v.jsx)(c.K,{onClick:(0,Ce.Z)(Ne().mark((function t(){return Ne().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}return t.t0=e,t.next=4,(0,T.C)();case 4:return t.t1=t.sent,t.next=7,(0,t.t0)(t.t1);case 7:e((0,y.oL)()),window.open("".concat(window.location.origin).concat(o.action_url));case 9:case"end":return t.stop()}}),t)}))),children:o.name})},"runBtnList_".concat(o.name))})),((null===o||void 0===o?void 0:o.pipeline_jump_button)||[]).map((function(e){return(0,v.jsx)(Oe,{styles:Te.buttonItemStyle,children:(0,v.jsx)(u.a,{onClick:(0,Ce.Z)(Ne().mark((function o(){return Ne().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n&&window.open("".concat(e.action_url));case 1:case"end":return o.stop()}}),o)}))),children:(0,v.jsxs)("div",{className:Te.iconContainerStyle,children:[(0,v.jsx)("span",{className:Te.iconStyle,dangerouslySetInnerHTML:{__html:e.icon_svg}}),(0,v.jsx)("span",{children:e.name})]})})},"runBtnList_".concat(e.name))}))]})})]})})},Be=o(7776),He=o(1244),Ee={editorToolStyle:{root:{display:"flex",flexDirection:"row",backgroundColor:"#fff",padding:"2px 0px",borderBottom:"1px solid #dadada","#authoring-page-toolbar":{flex:1}}},autoSavedTips:(0,h.y0)({paddingRight:20,lineHeight:"1"}),commandBarStyle:{root:{height:"40px",padding:"0px 14px 0px 8px",borderBottom:"none",backgroundColor:"#fff"}},commonButton:{root:{width:"40px",height:"40px",borderRadius:"2px",minWidth:"40px"}},commonIcon:{root:{color:"#015cda",fontSize:18}},toggleStyle:{root:{display:"flex",alignItems:"center",padding:"8px 0px 8px 8px",height:"100%",boxSizing:"border-box",borderLeft:"1px solid rgb(234, 234, 234)",marginLeft:"8px"},container:{display:"inline-flex"}},comboBoxStyle:{container:{borderLeft:"1px solid #eaeaea",marginLeft:"4px",padding:"0px 5px 0px 10px",width:"auto"},root:{backgroundColor:"#ffffff",padding:"0px 20px 0px 4px",selectors:{"&.is-open::after":{borderBottom:"2px solid #015cda"},"&::after":{border:"none",borderBottom:0,borderRadius:"none"},".ms-Button":{width:20},".ms-Icon":{fontSize:8}}},input:{width:35,backgroundColor:"#ffffff"}}},Re=i.K.Item,Me=function(){var e=(0,f.T)(),n=(0,f.C)(I.hr),o=(0,f.C)(y.N1),l=((0,f.C)(y.H6),(0,f.C)(y.Bn)),r=(0,f.C)(T.BX),s=(0,f.C)(y.B5),d=(0,f.C)(I.tT),c=[{key:"expand",iconProps:{iconName:"Library",styles:Ee.commonIcon},text:"\u5c55\u5f00/\u5173\u95ed\u83dc\u5355",onClick:function(n){null===n||void 0===n||n.preventDefault(),e((0,He.ZN)())}},{key:"save",iconProps:{iconName:"save",styles:Ee.commonIcon},text:"\u4fdd\u5b58",onClick:function(){var n=(0,Ce.Z)(Ne().mark((function n(o){return Ne().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:null===o||void 0===o||o.preventDefault(),e((0,y.oL)());case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},{key:"delete",iconProps:{iconName:"Delete",styles:Ee.commonIcon},text:"\u5220\u9664\u8282\u70b9",onClick:function(){if((0,_.UG)(d[0])){var o;null===(o=d[0])||void 0===o||o.id;e((0,y.oL)())}e((0,y.u6)(!0)),e((0,I.OV)((0,_.d0)(d,n)))}}];return(0,t.useEffect)((function(){r&&r.forEach((function(n){Object.keys(n).length>0&&e((0,y.u6)(!0))}))}),[r]),(0,v.jsxs)(Re,{shrink:!0,styles:Ee.editorToolStyle,children:[(0,v.jsx)(Be.X,{id:"authoring-page-toolbar",styles:Ee.commandBarStyle,items:c}),(0,v.jsx)(i.K,{horizontal:!0,verticalAlign:"center",className:Ee.autoSavedTips,style:{visibility:l?"visible":"hidden"},children:o?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.J,{iconName:s?"AlertSolid":"SkypeCircleCheck",styles:{root:{color:s?"#e95f39":"#8cb93c",marginRight:5}}}),s?"\u672a\u4fdd\u5b58":"\u5df2\u4fdd\u5b58"]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k.$,{styles:{root:{marginRight:5}},size:N.E.small}),"\u4fdd\u5b58\u4e2d"]})})]})},We=i.K.Item,Ke=function(){var e=(0,f.T)();return(0,t.useEffect)((function(){e((0,y.e4)())}),[]),(0,v.jsx)(We,{className:"flow-editor",styles:{root:{flexGrow:1,flexShrink:1,background:"#f4f4f4",overflow:"hidden",display:"flex",flexDirection:"column"}},children:(0,v.jsxs)(i.K,{grow:1,children:[(0,v.jsx)(ze,{}),(0,v.jsx)(Me,{}),(0,v.jsx)(Se,{})]})})},Fe=o(4039),Je=o(2972),Pe=o(4026),Ae=o(6975),Ge={get:function(e){var n=window.localStorage.getItem(e);return n&&n.match(/^(\{|\[).*(?=[}\]])/)?JSON.parse(n):n||""},set:function(e,n){window.localStorage.setItem(e,"string"===typeof n?n:JSON.stringify(n))}},Xe={calloutContent:(0,h.y0)({display:"flex",flexFlow:"column nowrap",width:"360px",height:"auto",boxSizing:"border-box",maxHeight:"inherit",padding:"16px 0px",fontSize:"12px",background:"#fff",borderRadius:"2px"}),moduleDetailItemStyle:(0,h.y0)({fontSize:"12px",padding:"0 16px",overflowX:"visible",overflowY:"hidden"}),moduleDetailTitle:(0,h.y0)({padding:"0px 16px",fontWeight:600,fontSize:"14px",lineHeight:"1",marginTop:"0px",marginBottom:"8px"}),moduleDetailLabel:(0,h.y0)({fontSize:"12px",fontWeight:"bold",lineHeight:"16px",color:"rgb(89, 89, 89)",padding:"0px",margin:"0px 0px 4px"}),moduleDetailBody:(0,h.y0)({lineHeight:"14px",marginBottom:"22px",p:{margin:"0",padding:"0"}}),moduleButton:(0,h.y0)({display:"flex",justifyContent:"center",alignItems:"center"})},Ve=i.K.Item,qe=function(){var e=(0,f.T)(),n=(0,f.C)(He.p),o=(0,f.C)(He.b2),t=(0,f.C)(He.H6),l=function(n){e((0,He.DH)("mouseenter"!==n.type))};return(0,v.jsx)(Je.U,{gapSpace:-10,hidden:n,hideOverflow:!0,calloutMaxHeight:480,isBeakVisible:!1,preventDismissOnLostFocus:!0,target:{current:o},directionalHint:12,children:(0,v.jsxs)(i.K,{className:Xe.calloutContent,onMouseEnter:l,onMouseLeave:l,children:[(0,v.jsx)(Ve,{children:(0,v.jsx)("h3",{className:Xe.moduleDetailTitle,children:t.name})}),(0,v.jsx)(Ve,{grow:1,shrink:1,className:Xe.moduleDetailItemStyle,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(H._,{title:"Description",className:Xe.moduleDetailLabel,children:"\u63cf\u8ff0"}),(0,v.jsx)("div",{className:Xe.moduleDetailBody,children:(0,v.jsx)("p",{children:t.describe})})]})}),(0,v.jsx)(Ve,{grow:1,shrink:1,className:Xe.moduleDetailItemStyle,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(H._,{title:"Description",className:Xe.moduleDetailLabel,children:"\u521b\u5efa\u4eba"}),(0,v.jsx)("div",{className:Xe.moduleDetailBody,children:(0,v.jsx)("p",{children:t.createdBy})})]})}),(0,v.jsx)(Ve,{grow:1,shrink:1,className:Xe.moduleDetailItemStyle,children:(0,v.jsxs)("div",{children:[(0,v.jsx)(H._,{title:"Description",className:Xe.moduleDetailLabel,children:"\u4e0a\u6b21\u4fee\u6539\u65f6\u95f4"}),(0,v.jsx)("div",{className:Xe.moduleDetailBody,children:(0,v.jsx)("p",{children:t.lastChanged})})]})}),null!==t&&void 0!==t&&t.help_url?(0,v.jsx)(Ve,{grow:1,shrink:1,className:Xe.moduleButton,children:(0,v.jsx)(c.K,{onClick:function(){window.open(t.help_url)},children:"\u914d\u7f6e\u6587\u6863"})}):null]})})},Ue={moduleItem:(0,h.y0)({width:"100%",userSelect:"none",cursor:"pointer"}),moduleListModuleCard:(0,h.y0)({margin:"8px 16px",border:"1px solid rgb(234, 234, 234)",background:"rgb(248, 248, 248)",color:"rgb(55, 55, 55)",borderRadius:"2px",padding:"8px",display:"flex",fontSize:"12px",flexDirection:"column","&:hover":{backgroundColor:"#eee"},"> div":{pointerEvents:"none",display:"flex",flexDirection:"row",flexGrow:1,alignItems:"center","> header":{flexGrow:1,color:"rgb(0, 0, 0)",fontWeight:600,fontSize:"12px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",lineHeight:"16px"},"> summary":{flexGrow:1,color:"rgb(55, 55, 55)",fontSize:"12px"}}})},$e=function(e){var n=(0,f.T)(),o=(0,t.useState)(e.model),i=(0,l.Z)(o,2),r=i[0],s=i[1],d=function(e){"mouseenter"===e.type&&n((0,He.VF)(e.target)),n((0,He.DH)("mouseenter"!==e.type)),n((0,He.rn)(r))};return(0,t.useEffect)((function(){s(e.model)}),[e.model]),(0,v.jsx)("div",{className:Ue.moduleItem,children:(0,v.jsx)("div",{className:"module-card-with-hover-wrap",children:(0,v.jsx)("div",{className:"module-card-content-wrap",children:(0,v.jsxs)("div",{className:Ue.moduleListModuleCard,onMouseEnter:d,onMouseLeave:d,onMouseDown:function(){n((0,He.DH)(!0))},onDragStart:function(e){e.dataTransfer.setData("application/reactflow",JSON.stringify(r)),e.dataTransfer.effectAllowed="move"},draggable:!0,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(a.J,{iconName:"Database",styles:{root:{marginRight:"4px",lineHeight:"16px"}}}),(0,v.jsx)("header",{children:r.name})]}),(0,v.jsx)("div",{children:(0,v.jsx)("summary",{children:(0,v.jsx)("span",{children:r.describe})})})]})})})})},Ye={moduleItem:(0,h.y0)({width:"100%",userSelect:"none",cursor:"pointer"}),moduleListModuleCard:(0,h.y0)({margin:"4px 8px",border:"1px solid rgb(234, 234, 234)",background:"rgb(248, 248, 248)",color:"rgb(55, 55, 55)",borderRadius:"2px",padding:"5px 8px",display:"flex",fontSize:"12px",flexDirection:"column","&:hover":{backgroundColor:"#eee"},"> div":{pointerEvents:"none",display:"flex",flexDirection:"row",flexGrow:1,alignItems:"center","> header":{flexGrow:1,color:"rgb(0, 0, 0)",fontWeight:600,fontSize:"12px",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",lineHeight:"16px"},"> summary":{flexGrow:1,color:"rgb(55, 55, 55)",fontSize:"12px"}}})},Qe=function(e){var n=(0,t.useState)(e.model),o=(0,l.Z)(n,2),i=o[0],r=o[1];return(0,t.useEffect)((function(){r(e.model)}),[e.model]),(0,v.jsx)("div",{className:Ye.moduleItem,children:(0,v.jsx)("div",{className:"module-card-with-hover-wrap",children:(0,v.jsx)("div",{className:"module-card-content-wrap",children:(0,v.jsxs)("div",{className:Ye.moduleListModuleCard,onClick:e.onClick,children:[(0,v.jsxs)("div",{children:[(0,v.jsx)(a.J,{iconName:"Database",styles:{root:{marginRight:"4px",lineHeight:"16px"}}}),(0,v.jsx)("header",{children:i.name})]}),(0,v.jsx)("div",{children:(0,v.jsx)("summary",{children:(0,v.jsx)("span",{children:i.describe})})})]})})})})},en={"::-webkit-scrollbar":{width:4},"::-webkit-scrollbar-thumb":{minHeight:"15px",border:"6px solid transparent",backgroundClip:"padding-box",backgroundColor:"rgb(200, 200, 200)"}},nn={showModuleTree:(0,h.y0)({width:"320px",height:"100%",transition:"all 0.35s ease 0s",overflowX:"hidden",visibility:"visible"}),hideModuleTree:(0,h.y0)({width:"0px",height:"100%",transition:"width 0.35s ease 0s",overflowX:"hidden",visibility:"hidden"}),treeContainer:(0,h.y0)({width:"320px",boxSizing:"border-box",height:"100%",display:"flex",flexDirection:"column",borderRight:"1px solid rgb(234, 234, 234)",backgroundColor:"#fff"}),searchBoxStyle:(0,h.y0)({margin:"12px 16px",padding:"1px 0px",color:"rgb(1, 92, 218)",lineHeight:"32px",minHeight:"32px",flexGrow:"1"}),searchCallout:(0,h.y0)({".ms-Callout-main":(0,w.Z)({overflowY:"overlay",willChange:"transform"},en)}),searchListStyle:(0,h.y0)({width:"287px",padding:"8px 0"}),summaryStyle:(0,h.y0)({display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 16px",borderTop:"1px solid rgb(218, 218, 218)"}),moduleTreeStyle:(0,h.y0)({position:"relative",display:"flex",flexDirection:"column",overflowX:"hidden",overflowY:"auto",flexGrow:"1"}),moduleTreeBody:(0,h.y0)({position:"relative",height:"100%"}),listIconStyle:(0,h.y0)({display:"inline-flex",fontSize:"12px",lineHeight:"12px",marginRight:"4px",height:"6px",color:"rgb(55, 55, 55)",userSelect:"none"}),spinnerContainer:(0,h.y0)({width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),moduleListStyle:(0,h.y0)((0,w.Z)({padding:0,margin:"0 auto",overflowY:"overlay",height:"100%",willChange:"transform"},en)),moduleListItem:(0,h.y0)({listStyle:"none",outline:"none"}),itemFolderNode:(0,h.y0)({display:"flex",alignItems:"center",cursor:"pointer",padding:"7px 15px",border:"1px solid transparent",height:16,fontFamily:"Segoe UI,sans-serif",fontSize:12,lineHeight:16,fontWeight:600,color:"black","&:hover":{backgroundColor:"#eaeaea"}})},on=i.K.Item,tn=[{color:"rgba(0,120,212,1)",bg:"rgba(0,120,212,0.02)"},{color:"rgba(0,170,200,1)",bg:"rgba(0,170,200,0.02)"},{color:"rgba(0,200,153,1)",bg:"rgba(0,200,153,0.02)"},{color:"rgba(0,6,200,1)",bg:"rgba(0,6,200,0.02)"},{color:"rgba(212,65,0,1)",bg:"rgba(212,65,0,0.02)"},{color:"rgba(212,176,0,1)",bg:"rgba(212,176,0,0.02)"}],ln=function(){var e=(0,f.T)(),n=(0,f.C)(He.RU),o=(0,t.useState)(new Set),s=(0,l.Z)(o,2),d=s[0],c=s[1],u=(0,t.useState)(new Map),p=(0,l.Z)(u,2),x=p[0],h=p[1],g=(0,t.useState)(0),b=(0,l.Z)(g,2),y=b[0],j=b[1],w=(0,t.useState)(!1),S=(0,l.Z)(w,2),C=S[0],_=S[1],I=(0,t.useState)(!1),D=(0,l.Z)(I,2),T=D[0],O=D[1],z=(0,t.useState)(new Map),B=(0,l.Z)(z,2),H=B[0],E=B[1],R=function(){_(!0),j(0),L.Z.getTemplateCommandConfig().then((function(e){if(console.log("job_template_modelview",e),0===(null===e||void 0===e?void 0:e.status)&&"success"===(null===e||void 0===e?void 0:e.message)){for(var n=e.templte_common_ui_config,o=e.templte_list,t=e.template_group_order,i={},l=0;l<t.length;l++){var r=t[l];i[r]=o[r]}!function(e,n){var o=new Map,t=0,i=0,l=function(l){if(Object.prototype.hasOwnProperty.call(e,l)){var r=e[l].map((function(e){return{id:e.template_id,name:e.template_name,createdBy:e.username,lastChanged:e.changed_on,describe:e.describe,help_url:e.help_url,templte_ui_config:e.templte_ui_config,templte_common_ui_config:n,args:{},expand:{},template:e.template_name,"template-group":l,color:tn[i%tn.length]}}));t+=r.length,o.set(l,{id:l,title:l,children:r}),i+=1}};for(var r in e)l(r);console.log(o),j(t),h(o)}(i,n);var a=Date.now();Ge.set("ft_job_template_common",{update:a,value:n,expire:864e5}),Ge.set("ft_job_template",{update:a,value:i,expire:864e5})}})).catch((function(n){var o,t;n.response&&e((0,Z.L$)({msg:null===(o=n.response)||void 0===o||null===(t=o.data)||void 0===t?void 0:t.message}))})).finally((function(){_(!1)}))};return(0,t.useEffect)((function(){R()}),[]),(0,v.jsxs)(on,{shrink:!0,children:[(0,v.jsx)("div",{className:n?nn.showModuleTree:nn.hideModuleTree,children:(0,v.jsxs)("div",{className:nn.treeContainer,children:[(0,v.jsxs)(i.K,{horizontal:!0,horizontalAlign:"space-between",children:[(0,v.jsx)(Fe.R,{placeholder:"\u641c\u7d22\u6a21\u677f\u540d\u79f0\u6216\u63cf\u8ff0",role:"search",className:nn.searchBoxStyle,onChange:m((function(e,n){var o=new Map;x.forEach((function(e,t){var i=e.children;i.length>0&&i.forEach((function(e){(e.name.indexOf(n)>-1||e.describe.indexOf(n)>-1)&&(o.has(t)?o.set(t,o.get(t).concat(e)):o.set(t,[e]))}))})),E(o),O(!0)}),1e3),onBlur:function(){setTimeout((function(){O(!1)}),300)}}),(0,v.jsx)(Je.U,{className:nn.searchCallout,isBeakVisible:!1,preventDismissOnLostFocus:!0,hidden:!T,calloutMaxHeight:300,target:".ms-SearchBox",children:(0,v.jsx)(i.K,{className:nn.searchListStyle,children:Array.from(H.keys()).map((function(e){var n=H.get(e);return(0,v.jsx)(t.Fragment,{children:null===n||void 0===n?void 0:n.map((function(n){return(0,v.jsx)(Qe,{model:n,onClick:function(){console.log(d),d.has(e)||(d.add(e),c(new Set(d)))}},n.id)}))},e)}))})})]}),(0,v.jsxs)("div",{className:nn.summaryStyle,children:[(0,v.jsxs)(Pe.x,{children:[y," assets in total"]}),(0,v.jsx)(Ae.k,{children:(0,v.jsx)(r.h,{iconProps:{iconName:"Refresh"},onClick:function(){C||R()}})})]}),(0,v.jsx)("div",{className:nn.moduleTreeStyle,children:(0,v.jsx)("div",{className:nn.moduleTreeBody,children:C?(0,v.jsx)(i.K,{className:nn.spinnerContainer,children:(0,v.jsx)(k.$,{size:N.E.large,label:"Loading"})}):(0,v.jsx)("ul",{className:nn.moduleListStyle,children:Array.from(x.keys()).map((function(e){var n,o=x.get(e);return(0,v.jsxs)("li",{className:nn.moduleListItem,children:[(0,v.jsx)("div",{role:"button",onClick:function(){d.has(e)?d.delete(e):d.add(e),c(new Set(d))},children:(0,v.jsxs)("div",{className:nn.itemFolderNode,children:[(0,v.jsx)(a.J,{iconName:d.has(e)?"FlickUp":"FlickLeft",styles:{root:{alignItems:d.has(e)?"baseline":"center"}},className:nn.listIconStyle}),o.title]})}),d.has(e)?(0,v.jsx)("ul",{role:"group",style:{paddingLeft:"0px"},children:null===(n=o.children)||void 0===n?void 0:n.map((function(e){return(0,v.jsx)("li",{className:nn.moduleListItem,children:(0,v.jsx)("div",{role:"button",children:(0,v.jsx)($e,{model:e})})},e.id)}))}):null]},e)}))})})})]})}),(0,v.jsx)(qe,{})]})},rn={root:{width:"100%",height:"100%",overflow:"hidden"}},an=function(){var e=(0,f.C)(y.Xd);return(0,v.jsxs)(i.K,{className:"app-container",horizontal:!0,styles:rn,children:[e?(0,v.jsx)("div",{style:{width:"100vw",height:"100vh",position:"absolute",backgroundColor:"rgba(0,0,0,0.5)",zIndex:99,display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",cursor:"pointer",fontSize:20},onClick:function(){window.location.reload()},children:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u70b9\u51fb\u5237\u65b0\u91cd\u8bd5"}):null,(0,v.jsx)(ln,{}),(0,v.jsx)(Ke,{}),(0,v.jsx)(b,{})]})}}}]);