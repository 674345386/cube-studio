"use strict";(self.webpackChunkkubeflow_frontend=self.webpackChunkkubeflow_frontend||[]).push([[896],{5896:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});var n=a(29439),r=a(1413),s=a(4519),i={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 000 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"arrow-left",theme:"outlined"},c=a(64158),d=function(e,t){return s.createElement(c.Z,(0,r.Z)((0,r.Z)({},e),{},{ref:t,icon:i}))};d.displayName="ArrowLeftOutlined";var l=s.forwardRef(d),o=a(90575),u=a(70332),f=a(16548),h=a(95861),p=a(10089),x=a(12513),m=a(72625),j=a(84199),v=a(92306),S=a(2556),b=a(17972);function w(){var e=(0,s.useState)((0,f.jS)("nodeType")||""),t=(0,n.Z)(e,2),a=t[0],r=(t[1],(0,s.useState)((0,f.jS)("nodeId")||"")),i=(0,n.Z)(r,2),c=i[0],d=(i[1],(0,s.useState)(!0)),l=(0,n.Z)(d,2),o=l[0],u=l[1],h=(0,s.useState)([]),w=(0,n.Z)(h,2),y=w[0],Z=w[1],g=(0,s.useState)([]),k=(0,n.Z)(g,2),N=k[0],_=k[1],I=(0,s.useState)([]),z=(0,n.Z)(I,2),T=z[0],C=z[1],B=(0,s.useState)([]),D=(0,n.Z)(B,2),E=D[0],L=D[1],P=(0,s.useState)(""),K=(0,n.Z)(P,2),O=K[0],J=K[1];return(0,s.useEffect)((function(){(0,j.IZ)({nodeId:c,nodeType:a}).then((function(e){console.log(e.data.data);var t=e.data.data,a=t.col_info,n=t.base_info,r=t.task_info,s=t.technical_info,i=t.create_table_ddl;Z(n||[]),_(a||[]),C(r||[]),L(s||[]),J(i)})).catch((function(){})).finally((function(){u(!1)}))}),[]),(0,S.jsxs)("div",{className:"d-f h100",children:[(0,S.jsx)("div",{className:"flex1 p8",children:(0,S.jsx)(v.Z,{buttonNode:(0,S.jsx)(b,{text:O,onCopy:function(){return p.ZP.success("\u5df2\u590d\u5236\u5230\u7c98\u8d34\u677f")},children:(0,S.jsx)(x.Z,{type:"primary",children:"\u590d\u5236DDL\u8bed\u53e5"})}),loading:o,rowKey:function(e){return JSON.stringify(e)},size:"small",cancelExportData:!0,columns:[{title:"\u5e8f\u53f7",dataIndex:"col_index",key:"col_index",width:80,render:function(e,t,a){return a+1}},{title:"\u5b57\u6bb5\u540d\u79f0",dataIndex:"col_name",key:"col_name",width:220},{title:"\u5b57\u6bb5\u5b89\u5168\u7b49\u7ea7",dataIndex:"field_security",key:"field_security",width:220,render:function(e){return(0,S.jsx)(m.Z,{children:e})}},{title:"\u63cf\u8ff0",dataIndex:"comment",key:"comment",width:220},{title:"\u5b57\u6bb5\u7c7b\u578b",dataIndex:"data_type",key:"data_type",width:220},{title:"\u662f\u5426\u5206\u533a\u5b57\u6bb5",dataIndex:"is_partition_col",key:"is_partition_col",width:220,render:function(e){return e?"\u662f":"\u5426"}}],pagination:!1,dataSource:N})}),(0,S.jsxs)("div",{className:"bg-w",style:{maxWidth:512},children:[y.length?(0,S.jsxs)("div",{className:"p24",style:{borderLeft:"16px solid #f2f3f5",borderBottom:"16px solid #f2f3f5"},children:[(0,S.jsx)("div",{className:"mb8",children:(0,S.jsx)("span",{className:"bor-l b-theme pl4 fs16",children:"\u57fa\u672c\u5c5e\u6027"})}),y.map((function(e,t){return(0,S.jsxs)("div",{className:"d-f mb12",children:[(0,S.jsxs)("div",{className:"ta-l c-hint-b",style:{wordBreak:"keep-all"},children:[e.cn,"\uff1a"]}),(0,S.jsx)("div",{children:(0,S.jsx)("span",{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:e.value})})]},"baseInfoItem_".concat(t))}))]}):null,T.length?(0,S.jsxs)("div",{className:"pb12 p24",style:{borderLeft:"16px solid #f2f3f5",borderBottom:"16px solid #f2f3f5"},children:[(0,S.jsx)("div",{className:"mb8",children:(0,S.jsx)("span",{className:"bor-l b-theme pl4 fs16",children:"\u4efb\u52a1\u4fe1\u606f"})}),T.map((function(e,t){return(0,S.jsxs)("div",{className:"d-f mb12",children:[(0,S.jsxs)("div",{className:"ta-l c-hint-b",style:{wordBreak:"keep-all"},children:[e.cn,"\uff1a"]}),(0,S.jsx)("div",{children:(0,S.jsx)("span",{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:e.value})})]},"baseInfoItem_".concat(t))}))]}):null,E.length?(0,S.jsxs)("div",{className:"p24",style:{borderLeft:"16px solid #f2f3f5",borderBottom:"16px solid #f2f3f5"},children:[(0,S.jsx)("div",{className:"mb8",children:(0,S.jsx)("span",{className:"bor-l b-theme pl4 fs16",children:"\u6280\u672f\u4fe1\u606f"})}),E.map((function(e,t){return(0,S.jsxs)("div",{className:"d-f mb12",children:[(0,S.jsxs)("div",{className:"ta-l c-hint-b",style:{wordBreak:"keep-all"},children:[e.cn,"\uff1a"]}),(0,S.jsx)("div",{children:(0,S.jsx)("span",{style:{wordBreak:"break-word",whiteSpace:"pre-wrap"},children:e.value})})]},"baseInfoItem_".concat(t))}))]}):null]})]})}var y=a(93433),Z=a(61143),g=function(e){return Z.Z.get("/api/dataServices/metadata/searchPartitionDetailsPage",{params:e})};function k(){var e=(0,s.useState)((0,f.jS)("nodeType")||""),t=(0,n.Z)(e,2),a=t[0],i=(t[1],(0,s.useState)((0,f.jS)("nodeId")||"")),c=(0,n.Z)(i,2),d=c[0],l=(c[1],(0,s.useState)(!0)),o=(0,n.Z)(l,2),u=o[0],h=o[1],p=(0,s.useState)([]),x=(0,n.Z)(p,2),m=x[0],j=x[1],b=(0,s.useState)([]),w=(0,n.Z)(b,2),g=w[0],k=w[1],N=(0,s.useState)({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171".concat(e,"\u6761")}}),_=(0,n.Z)(N,2),I=_[0],z=_[1];return(0,s.useEffect)((function(){var e;(e={nodeId:d,nodeType:a},Z.Z.get("/api/dataServices/metadata/samplingData",{params:e})).then((function(e){var t=e.data.data,a=Object.entries(t[0]||{}).reduce((function(e,t){var a=(0,n.Z)(t,2),r=a[0];a[1];return[].concat((0,y.Z)(e),[{title:r,dataIndex:r,key:r}])}),[]);k(a),j(t)})).catch((function(e){})).finally((function(){h(!1)}))}),[]),(0,S.jsx)("div",{className:"p8",children:(0,S.jsx)(v.Z,{loading:u,rowKey:function(e){return JSON.stringify(e)},size:"small",cancelExportData:!0,columns:g,pagination:I,dataSource:m,onChange:function(e){z((0,r.Z)((0,r.Z)({},e),{},{current:e.current,pageSize:e.pageSize}))},scroll:{x:1500}})})}var N=a(6857);function _(){var e=(0,s.useState)((0,f.jS)("nodeType")||""),t=(0,n.Z)(e,2),a=t[0],i=(t[1],(0,s.useState)((0,f.jS)("nodeId")||"")),c=(0,n.Z)(i,2),d=c[0],l=(c[1],(0,s.useState)(!0)),o=(0,n.Z)(l,2),u=o[0],h=o[1],p=(0,s.useState)([]),x=(0,n.Z)(p,2),m=x[0],j=x[1],b=(0,s.useState)(),w=(0,n.Z)(b,2),Z=w[0],k=w[1],_=(0,s.useState)({current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0,showTotal:function(e){return"\u5171".concat(e,"\u6761")}}),I=(0,n.Z)(_,2),z=I[0],T=I[1],C=(0,s.useRef)(z),B=function(e){C.current=e,T(e)},D=(0,s.useState)([{title:"\u5e8f\u53f7",dataIndex:"col_index",key:"col_index",width:80,render:function(e,t,a){return((z.current||0)-1)*(z.pageSize||10)+(a+1)}},{title:"\u5e93\u8868\u540d\u79f0",dataIndex:"node_id",key:"node_id",width:220},{title:"\u5206\u533a",dataIndex:"partition",key:"partition",width:220},{title:"\u5206\u533a\u884c\u6570",dataIndex:"row_count",key:"row_count",width:220},{title:"\u5206\u533a\u5927\u5c0f",dataIndex:"row_size",key:"row_size",width:220,render:function(e){return(0,f.f)(+e)}}]),E=(0,n.Z)(D,2),L=E[0],P=E[1];(0,s.useEffect)((function(){"CK"===a&&P([].concat((0,y.Z)(L),[{title:"\u96c6\u7fa4\u8be6\u60c5",dataIndex:"clusters",key:"clusters",width:220,render:function(e){return(e||[]).map((function(e){return(0,S.jsx)("div",{children:e})}))}}])),K()}),[]);var K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;h(!0),g({nodeId:d,nodeType:a,pageCurrent:e-1,pageSize:t,sortOrder:"DESC",partition:Z}).then((function(a){var n=a.data.data,s=n.metadata_partition_infos,i=n.total;j(s),B((0,r.Z)((0,r.Z)({},z),{},{current:e,pageSize:t,total:i}))})).catch((function(e){})).finally((function(){h(!1)}))};return(0,S.jsx)("div",{className:"p8",children:(0,S.jsx)(v.Z,{buttonNode:(0,S.jsx)(N.Z,{value:Z,onSearch:function(){K()},onChange:function(e){return k(e)},placeholder:"\u8f93\u5165\u5206\u533aID\u641c\u7d22"}),loading:u,rowKey:function(e){return JSON.stringify(e)},size:"small",cancelExportData:!0,columns:L,pagination:z,dataSource:m,onChange:function(e){K(e.current,e.pageSize)}})})}function I(){var e=(0,s.useState)((0,f.jS)("nodeType")||""),t=(0,n.Z)(e,2),a=t[0],r=(t[1],(0,s.useState)((0,f.jS)("nodeId")||"")),i=(0,n.Z)(r,2),c=i[0],d=(i[1],(0,f.jS)("tabId")||"1"),p=(0,u.s0)();return(0,S.jsxs)("div",{className:"bg-title h100 p16 d-f fd-c fade-in",children:[(0,S.jsxs)("div",{className:"bg-w mb16 p16",children:[(0,S.jsx)("div",{className:"pb16",children:(0,S.jsxs)("span",{className:"link cp",onClick:function(){p("/data/metadata/metadata_table")},children:[(0,S.jsx)(l,{}),"\u8fd4\u56de"]})}),(0,S.jsxs)("div",{className:"pb8",children:[(0,S.jsx)("span",{children:"\u5e93\u8868\u7c7b\u578b\uff1a"}),(0,S.jsx)("strong",{className:"fs16",children:a})]}),(0,S.jsxs)("div",{children:[(0,S.jsx)("span",{children:"\u5e93\u8868\u540d\uff1a"}),(0,S.jsx)("strong",{className:"fs16",children:c})]})]}),(0,S.jsx)("div",{className:"card-container",style:{overflowY:"auto"},children:(0,S.jsxs)(o.Z,{type:"card",defaultActiveKey:d,children:[(0,S.jsx)(o.Z.TabPane,{tab:"\u57fa\u672c\u4fe1\u606f",children:(0,S.jsx)(w,{})},"1"),(0,S.jsx)(o.Z.TabPane,{tab:"\u8840\u7f18\u5173\u7cfb",children:(0,S.jsx)(h.Z,{})},"2"),"TDW"===a||"CK"===a?(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)(o.Z.TabPane,{tab:"\u6570\u636e\u9884\u89c8",children:(0,S.jsx)(k,{})},"3"),(0,S.jsx)(o.Z.TabPane,{tab:"\u5206\u533a\u4fe1\u606f",children:(0,S.jsx)(_,{})},"4")]}):null]})})]})}}}]);
//# sourceMappingURL=896.ddd4e2a8.chunk.js.map